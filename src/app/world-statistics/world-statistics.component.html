<div class="container-fluid" *ngIf="!mobile">
  <div class="m-3 h4">Last update {{ date | date: "short" }}</div>

  <mat-tab-group>
    <mat-tab *ngFor="let number of counter(numberOfTabs); index as i">
      <ng-template mat-tab-label>
        {{ getLabels(i) }}
      </ng-template>

      <div
        *ngIf="dataSource && dataSource[0]"
        class="container-fluid mat-elevation-z8"
      >
        <table mat-table [dataSource]="dataSource[i]" class="w-100 text">
          <ng-container matColumnDef="country">
            <th class="text-uppercase" mat-header-cell *matHeaderCellDef>
              Country
            </th>
            <td mat-cell *matCellDef="let element">{{ element.country }}</td>
          </ng-container>
          <ng-container matColumnDef="total-cases">
            <th class="text-uppercase" mat-header-cell *matHeaderCellDef>
              Total cases
            </th>
            <td class="text-center" mat-cell *matCellDef="let element">
              {{ element.cases.total }}
            </td>
          </ng-container>
          <ng-container matColumnDef="new-cases">
            <th class="text-uppercase" mat-header-cell *matHeaderCellDef>
              New cases
            </th>
            <td
              class="text-center table-warning"
              mat-cell
              *matCellDef="let element"
            >
              {{ element.cases.new }}
            </td>
          </ng-container>
          <ng-container matColumnDef="active-cases">
            <th class="text-uppercase" mat-header-cell *matHeaderCellDef>
              Active cases
            </th>
            <td class="text-center" mat-cell *matCellDef="let element">
              {{ element.cases.active }}
            </td>
          </ng-container>
          <ng-container matColumnDef="critical-cases">
            <th class="text-uppercase" mat-header-cell *matHeaderCellDef>
              Critical cases
            </th>
            <td class="text-center" mat-cell *matCellDef="let element">
              {{ element.cases.critical }}
            </td>
          </ng-container>

          <ng-container matColumnDef="recovered">
            <th class="text-uppercase" mat-header-cell *matHeaderCellDef>
              Recovered
            </th>
            <td
              class="text-center table-success"
              mat-cell
              *matCellDef="let element"
            >
              {{ element.cases.recovered }}
            </td>
          </ng-container>
          <ng-container matColumnDef="new-deaths">
            <th class="text-uppercase" mat-header-cell *matHeaderCellDef>
              New deaths
            </th>
            <td class="text-center" mat-cell *matCellDef="let element">
              {{ element.deaths.new }}
            </td>
          </ng-container>
          <ng-container matColumnDef="total-deaths">
            <th class="text-uppercase" mat-header-cell *matHeaderCellDef>
              Total deaths
            </th>
            <td
              class="table-danger text-center"
              mat-cell
              *matCellDef="let element"
            >
              {{ element.deaths.total }}
            </td>
          </ng-container>
          <ng-container matColumnDef="total-tests">
            <th class="text-uppercase" mat-header-cell *matHeaderCellDef>
              Total tests
            </th>
            <td class="text-center" mat-cell *matCellDef="let element">
              {{ element.tests.total }}
            </td>
          </ng-container>
          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>

<div class="container-fluid" *ngIf="mobile">
  <div class="m-3 h5">Last update {{ date | date: "short" }}</div>
    <mat-accordion>
      <mat-expansion-panel *ngFor="let country of worldStats">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{ country.country }}
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="container">
          <div class="row border-bottom p-2">
            <div class="col">Total cases</div>
            <div class="col">{{ country.cases.total }}</div>
          </div>
          <div class="row border-bottom p-2">
            <div class="col">New cases</div>
            <div class="col">{{ country.cases.new }}</div>
          </div>
          <div class="row border-bottom p-2">
            <div class="col">Active cases</div>
            <div class="col">{{ country.cases.new }}</div>
          </div>
          <div class="row border-bottom p-2">
            <div class="col">Critical cases</div>
            <div class="col">{{ country.cases.critical }}</div>
          </div>
          <div class="row border-bottom p-2">
            <div class="col">Recovered</div>
            <div class="col">{{ country.cases.recovered }}</div>
          </div>
          <div class="row border-bottom p-2">
            <div class="col">New deaths</div>
            <div class="col">{{ country.deaths.new }}</div>
          </div>
          <div class="row border-bottom p-2">
            <div class="col">Total deaths</div>
            <div class="col">{{ country.deaths.total }}</div>
          </div>
          <div class="row border-bottom p-2">
            <div class="col">Total tests</div>
            <div class="col">{{ country.tests.total }}</div>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
</div>
<footer-component></footer-component>
